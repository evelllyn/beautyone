"use strict";(self["webpackChunkvueworks"]=self["webpackChunkvueworks"]||[]).push([[984],{8373:function(i,e){e.Z={methods:{getFavorite(){if(localStorage.getItem("favoriteList")){const i=localStorage.getItem("favoriteList");this.favoriteItems=JSON.parse(i)}else this.favoriteItems=[]}}}},6984:function(i,e,t){t.r(e),t.d(e,{default:function(){return N}});var s=t(3396),r=t(7139),o=t(9242);const a={class:"container favContainer goods pt-3 all-content"},c={key:0,class:"row"},n=["onClick"],l={key:0,class:"sale-logo"},d={key:1,class:"on"},g={key:2,class:"sale"},v=(0,s._)("div",{class:"more"},"查看更多",-1),u={class:"card-body"},p={class:"card-title"},h=["onClick"],f={key:0,class:"bi bi-heart"},k={key:1,class:"bi bi-heart-fill text-danger"},m={class:"product-price"},w={key:0,class:"text-danger"},_={key:1},y={key:2,class:"del-price float-end"},D={key:1,class:"container spin"},b=(0,s._)("div",{class:"spinner-border text-success",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),I=[b],L={key:2,class:"noFavorite"},F=(0,s._)("i",{class:"bi bi-chat-square-heart"},null,-1),P=(0,s._)("div",{class:"nothing-content fs-3"},"目前沒有收藏的產品喔",-1);function q(i,e,t,b,q,x){const C=(0,s.up)("LoaDing"),S=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(C,{avtive:q.isLoading},null,8,["avtive"]),(0,s._)("div",a,[q.favoriteProducts.length?((0,s.wg)(),(0,s.iD)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(q.favoriteProducts,(i=>((0,s.wg)(),(0,s.iD)("div",{class:"col col-6 col-md-3 my-4",key:i.id},[(0,s._)("div",{class:"card",onClick:e=>x.getProductDescription(i.id)},[(0,s._)("div",{class:"card-img-top",style:(0,r.j5)({backgroundImage:`url(${i.imageUrl})`})},[i.price!=i.origin_price?((0,s.wg)(),(0,s.iD)("div",l)):(0,s.kq)("",!0),i.price!=i.origin_price?((0,s.wg)(),(0,s.iD)("span",d,"ON")):(0,s.kq)("",!0),i.price!=i.origin_price?((0,s.wg)(),(0,s.iD)("span",g,"SALE")):(0,s.kq)("",!0),v],4),(0,s._)("div",u,[(0,s._)("div",p,[(0,s._)("h5",null,(0,r.zw)(i.title),1),(0,s._)("a",{href:"#",onClick:(0,o.iM)((e=>x.removeFavorite(i)),["stop","prevent"])},[q.favoriteItems.every((e=>i.id!==e))?((0,s.wg)(),(0,s.iD)("i",f)):((0,s.wg)(),(0,s.iD)("i",k))],8,h)]),(0,s._)("div",m,[i.price?((0,s.wg)(),(0,s.iD)("span",w,"NT $"+(0,r.zw)(i.price),1)):(0,s.kq)("",!0),i.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",_,(0,r.zw)(i.origin_price)+"元",1)),i.price!=i.origin_price?((0,s.wg)(),(0,s.iD)("del",y,"原價NT$"+(0,r.zw)(i.origin_price),1)):(0,s.kq)("",!0)])])],8,n)])))),128))])):q.isLoading?((0,s.wg)(),(0,s.iD)("div",D,I)):((0,s.wg)(),(0,s.iD)("div",L,[F,P,(0,s.Wm)(S,{to:"/products",class:"btn surf-btn"},{default:(0,s.w5)((()=>[(0,s.Uk)("現在去逛逛")])),_:1})]))])],64)}t(7658);var x=t(8373),C={data(){return{favoriteItems:[],favoriteProducts:[],isLoading:!1}},inject:["emitter"],methods:{getFavoriteProducts(){const i="https://vue3-course-api.hexschool.io/api/eunho-api/products/all";this.isLoading=!0,this.$http.get(i).then((i=>{if(this.isLoading=!1,i.data.success){const e=i.data.products;this.favoriteProducts=e.filter((i=>this.favoriteItems.some((e=>i.id===e))))}})).catch((i=>{console.log(i)}))},getProductDescription(i){this.$router.push(`/product/${i}`)},removeFavorite(i){this.favoriteItems.indexOf(i.id),this.favoriteItems.splice(this.favoriteItems.indexOf(i.id),1),this.emitter.emit("push-message",{style:"danger",title:"已移除收藏"}),localStorage.setItem("favoriteList",JSON.stringify(this.favoriteItems)),this.getFavorite(),this.getFavoriteProducts()}},mixins:[x.Z],created(){this.getFavorite(),this.getFavoriteProducts()}},S=t(89);const $=(0,S.Z)(C,[["render",q]]);var N=$}}]);
//# sourceMappingURL=984.37595ede.js.map