{"version":3,"file":"js/945.f11427ad.js","mappings":"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","sources":["webpack://vueworks/./src/views/Front/UserCart.vue","webpack://vueworks/./src/views/Front/UserCart.vue?e966"],"sourcesContent":["<template>\r\n  <LoaDing :avtive=\"isLoading\"/>\r\n  <div class=\"container cart\">\r\n    <div class=\"row cartBox\">\r\n      <div class=\"boxContent\" v-if=\"cart.carts.length\">\r\n        <h3>購物清單</h3>\r\n        <table class=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th class=\"col-1\">圖片</th>\r\n              <th class=\"col-1\"></th>\r\n              <th class=\"col-3\">商品名稱</th>\r\n              <th class=\"col-2\">數量</th>\r\n              <th class=\"col-1\"></th>\r\n              <th>單價</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n              <td class=\"list-pic\" :style=\"{ backgroundImage: `url(${item.product.imageUrl})` }\"></td>\r\n              <td class=\"blank\"></td>\r\n              <td class=\"list-title\">\r\n                {{ item.product.title }}\r\n              </td>\r\n              <td class=\"list-qty\">\r\n                <div class=\"input-group input-group-sm\">\r\n                  <input type=\"number\" class=\"form-control\" min=\"1\" :disabled=\"status.loadingItem === item.id\" v-model.number=\"item.qty\" @change=\"updateCart(item)\">\r\n                  <div class=\"input-group-text\">{{ item.product.unit }}</div>\r\n                </div>\r\n              </td>\r\n              <td class=\"blank\"></td>\r\n              <td class=\"list-price\">\r\n                <small v-if=\"cart.final_total !== cart.total\">折扣價</small>\r\n                $ {{ $filters.currency(item.final_total) }}\r\n                <div class=\"text-danger\" v-if=\"item.coupon\">已套用優惠券</div>\r\n              </td>\r\n              <td class=\"deleteItem text-end\">\r\n                <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" :disabled=\"status.loadingItem === item.id\" @click=\"removeCartItem(item.id)\">\r\n                  <i class=\"bi bi-trash3\"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colspan=\"5\" class=\"blank\"></td>\r\n              <td class=\"text-end\">總計</td>\r\n              <td class=\"totalPrice text-end\">${{ $filters.currency(cart.total)}}</td>\r\n            </tr>\r\n            <tr v-if=\"cart.final_total !== cart.total\">\r\n              <td colspan=\"5\" class=\"blank\"></td>\r\n              <td class=\"text-end text-danger\">折扣價</td>\r\n              <td class=\"totalPrice text-end text-danger\">${{ $filters.currency(cart.final_total) }}</td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <div class=\"use-coupon input-group input-group-sm mb-3\">\r\n          <div class=\"blank col-8\"></div>\r\n          <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\r\n          <div class=\"input-group-append\">\r\n            <button type=\"button\" class=\"btn coupon-btn\" @click=\"addCouponCode\">\r\n              使用優惠券\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"go-pay text-end\">\r\n          <router-link to=\"/fillin\" class=\"btn go-btn\">前往結帳</router-link>\r\n        </div>\r\n      </div>\r\n      <div class=\"container spin\" v-else-if=\"isLoading\">\r\n        <div class=\"spinner-border text-success\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"nothing\">\r\n        <i class=\"bi bi-cart-dash\"></i>\r\n        <div class=\"nothing-content fs-3\">哎呀，購物車目前是空的喔</div>\r\n        <router-link to=\"/products\" class=\"btn surf-btn\">現在去逛逛</router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      cart: {\r\n        carts: []\r\n      },\r\n      coupon_code: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['$httpMessageState', 'emitter'],\r\n  methods: {\r\n    getProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.isLoading = false\r\n          this.products = res.data.products\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    },\r\n    addCart (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart })\r\n        .then(res => {\r\n          this.status.loadingItem = ''\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.isLoading = false\r\n          // data中的data下面有carts,total,final_total\r\n          this.cart = res.data.data\r\n          this.cartLength = res.data.data.carts.length\r\n          this.emitter.emit('sendNum', { data: this.cartLength })\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    updateCart (item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      this.isLoading = true\r\n      this.status.loadingItem = item.id\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(url, { data: cart })\r\n        .then(res => {\r\n          this.isLoading = false\r\n          this.status.loadingItem = ''\r\n          this.getCart()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    addCouponCode () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\r\n      const coupon = {\r\n        code: this.coupon_code\r\n      }\r\n      this.isLoading = true\r\n      this.$http.post(url, { data: coupon })\r\n        .then(res => {\r\n          this.isLoading = false\r\n          this.$httpMessageState(res, '套用優惠券')\r\n          this.getCart()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    removeCartItem (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.$http.delete(url)\r\n        .then(res => {\r\n          this.$httpMessageState(res, '移除商品')\r\n          this.status.loadingItem = ''\r\n          this.getCart()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=0fe971f6\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_19","colspan","role","_hoisted_33","_createVNode","_component_LoaDing","avtive","$data","isLoading","_hoisted_1","_hoisted_2","cart","carts","length","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","item","key","id","style","_normalizeStyle","backgroundImage","product","imageUrl","_hoisted_7","_hoisted_8","_toDisplayString","title","_hoisted_9","_hoisted_10","type","min","disabled","status","loadingItem","qty","$event","onChange","$options","updateCart","_hoisted_12","unit","_hoisted_13","_hoisted_14","final_total","total","_hoisted_15","_ctx","$filters","currency","coupon","_hoisted_16","_hoisted_17","onClick","removeCartItem","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","coupon_code","placeholder","_hoisted_30","_cache","args","addCouponCode","_hoisted_31","_component_router_link","to","_hoisted_32","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","data","products","inject","methods","getProducts","url","this","$http","get","then","res","catch","err","console","log","getProduct","$router","push","addCart","product_id","post","getCart","cartLength","emitter","emit","put","code","$httpMessageState","delete","created","__exports__","render"],"sourceRoot":""}