{"version":3,"file":"js/553.b128fe4c.js","mappings":"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","sources":["webpack://vueworks/./src/mixins/favoriteMixin.js","webpack://vueworks/./src/views/Front/MyFavorite.vue","webpack://vueworks/./src/views/Front/MyFavorite.vue?964b"],"sourcesContent":["export default {\r\n  methods: {\r\n    getFavorite () {\r\n      if (localStorage.getItem('favoriteList')) {\r\n        const changeList = localStorage.getItem('favoriteList')\r\n        this.favoriteItems = JSON.parse(changeList)\r\n      } else {\r\n        this.favoriteItems = []\r\n      }\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <LoaDing :avtive=\"isLoading\"/>\r\n  <div class=\"container favContainer goods pt-3 all-content\">\r\n    <div class=\"row\" v-if=\"favoriteProducts.length\">\r\n      <div class=\"col col-6 col-md-3 my-4\" v-for=\"item in favoriteProducts\" :key=\"item.id\">\r\n        <div class=\"card\" @click=\"getProductDescription(item.id)\">\r\n          <div class=\"card-img-top\" :style=\"{ backgroundImage: `url(${item.imageUrl})` }\">\r\n            <div class=\"sale-logo\" v-if=\"item.price != item.origin_price\"></div>\r\n            <span class=\"on\" v-if=\"item.price != item.origin_price\">ON</span>\r\n            <span class=\"sale\" v-if=\"item.price != item.origin_price\">SALE</span>\r\n            <div class=\"more\">查看更多</div>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"card-title\">\r\n              <p>{{ item.title }}</p>\r\n              <a href=\"#\" @click.stop.prevent=\"removeFavorite(item)\">\r\n                <i class=\"bi bi-heart\" v-if=\"favoriteItems.every((id) => item.id !== id)\"></i>\r\n                <i class=\"bi bi-heart-fill text-danger\" v-else></i>\r\n              </a>\r\n            </div>\r\n            <div class=\"product-price\">\r\n              <span class=\"text-danger\" v-if=\"item.price\">NT ${{ item.price }}</span>\r\n              <span v-if=\"!item.price\">{{ item.origin_price }}元</span>\r\n              <del class=\"del-price float-end\" v-if=\"item.price != item.origin_price\">原價NT${{ item.origin_price }}</del>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"addCart\">\r\n          <button type=\"button\" class=\"cart-btn\" @click=\"addCart(item.id)\" :disabled=\"this.status.loadingItem === item.id\">\r\n              加入購物車\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"container spin\" v-else-if=\"isLoading\">\r\n      <div class=\"spinner-border text-success\" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"noFavorite\">\r\n      <i class=\"bi bi-chat-square-heart\"></i>\r\n      <div class=\"nothing-content fs-3\">目前沒有收藏的產品喔</div>\r\n      <router-link to=\"/products\" class=\"btn surf-btn\">現在去逛逛</router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport favoriteMixin from '@/mixins/favoriteMixin'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      favoriteItems: [],\r\n      favoriteProducts: [],\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  inject: ['$httpMessageState', 'emitter'],\r\n  methods: {\r\n    getFavoriteProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.isLoading = false\r\n          if (res.data.success) {\r\n            const allProducts = res.data.products\r\n            this.favoriteProducts = allProducts.filter(item => this.favoriteItems.some((id) => item.id === id))\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getProductDescription (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    },\r\n    addCart (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart })\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            console.log(res)\r\n            this.$httpMessageState(res, '加入購物車')\r\n            this.getCart()\r\n            this.status.loadingItem = ''\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    removeFavorite (item) {\r\n      this.favoriteItems.indexOf(item.id)\r\n      this.favoriteItems.splice(this.favoriteItems.indexOf(item.id), 1)\r\n      this.emitter.emit('push-message', {\r\n        style: 'danger',\r\n        title: '已移除收藏'\r\n      })\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteItems))\r\n      this.getFavorite()\r\n      this.getFavoriteProducts()\r\n    },\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          // data中的data下面有carts,total,final_total\r\n          this.cart = res.data.data\r\n          this.cartLength = res.data.data.carts.length\r\n          this.emitter.emit('sendNum', { data: this.cartLength })\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  },\r\n  mixins: [favoriteMixin],\r\n  created () {\r\n    this.getFavorite()\r\n    this.getFavoriteProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./MyFavorite.vue?vue&type=template&id=95aa4cb8\"\nimport script from \"./MyFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./MyFavorite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["methods","getFavorite","localStorage","getItem","changeList","this","favoriteItems","JSON","parse","class","_createElementVNode","role","_hoisted_20","_createVNode","_component_LoaDing","avtive","$data","isLoading","_hoisted_1","favoriteProducts","length","_createElementBlock","_hoisted_2","_Fragment","_renderList","item","key","id","onClick","$event","$options","getProductDescription","style","_normalizeStyle","backgroundImage","imageUrl","price","origin_price","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","title","href","_withModifiers","removeFavorite","every","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","type","addCart","disabled","status","loadingItem","_hoisted_18","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_component_router_link","to","data","inject","getFavoriteProducts","url","$http","get","then","res","success","allProducts","products","filter","some","catch","err","console","log","$router","push","cart","product_id","qty","post","$httpMessageState","getCart","indexOf","splice","emitter","emit","setItem","stringify","cartLength","carts","mixins","favoriteMixin","created","__exports__","render"],"sourceRoot":""}