"use strict";(self["webpackChunkvueworks"]=self["webpackChunkvueworks"]||[]).push([[553],{8373:function(t,i){i.Z={methods:{getFavorite(){if(localStorage.getItem("favoriteList")){const t=localStorage.getItem("favoriteList");this.favoriteItems=JSON.parse(t)}else this.favoriteItems=[]}}}},9553:function(t,i,e){e.r(i),e.d(i,{default:function(){return z}});var s=e(3396),a=e(7139),o=e(9242);const r={class:"container favContainer goods pt-3 all-content"},c={key:0,class:"row"},n=["onClick"],l={key:0,class:"sale-logo"},d={key:1,class:"on"},g={key:2,class:"sale"},h=(0,s._)("div",{class:"more"},"查看更多",-1),u={class:"card-body"},p={class:"card-title"},v=["onClick"],m={key:0,class:"bi bi-heart"},f={key:1,class:"bi bi-heart-fill text-danger"},k={class:"product-price"},w={key:0,class:"text-danger"},_={key:1},y={key:2,class:"del-price float-end"},b={class:"addCart"},D=["onClick","disabled"],I={key:1,class:"container spin"},C=(0,s._)("div",{class:"spinner-border text-success",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),L=[C],$={key:2,class:"noFavorite"},x=(0,s._)("i",{class:"bi bi-chat-square-heart"},null,-1),F=(0,s._)("div",{class:"nothing-content fs-3"},"目前沒有收藏的產品喔",-1);function P(t,i,e,C,P,q){const S=(0,s.up)("LoaDing"),N=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(S,{avtive:P.isLoading},null,8,["avtive"]),(0,s._)("div",r,[P.favoriteProducts.length?((0,s.wg)(),(0,s.iD)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(P.favoriteProducts,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col col-6 col-md-3 my-4",key:t.id},[(0,s._)("div",{class:"card",onClick:i=>q.getProductDescription(t.id)},[(0,s._)("div",{class:"card-img-top",style:(0,a.j5)({backgroundImage:`url(${t.imageUrl})`})},[t.price!=t.origin_price?((0,s.wg)(),(0,s.iD)("div",l)):(0,s.kq)("",!0),t.price!=t.origin_price?((0,s.wg)(),(0,s.iD)("span",d,"ON")):(0,s.kq)("",!0),t.price!=t.origin_price?((0,s.wg)(),(0,s.iD)("span",g,"SALE")):(0,s.kq)("",!0),h],4),(0,s._)("div",u,[(0,s._)("div",p,[(0,s._)("p",null,(0,a.zw)(t.title),1),(0,s._)("a",{href:"#",onClick:(0,o.iM)((i=>q.removeFavorite(t)),["stop","prevent"])},[P.favoriteItems.every((i=>t.id!==i))?((0,s.wg)(),(0,s.iD)("i",m)):((0,s.wg)(),(0,s.iD)("i",f))],8,v)]),(0,s._)("div",k,[t.price?((0,s.wg)(),(0,s.iD)("span",w,"NT $"+(0,a.zw)(t.price),1)):(0,s.kq)("",!0),t.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",_,(0,a.zw)(t.origin_price)+"元",1)),t.price!=t.origin_price?((0,s.wg)(),(0,s.iD)("del",y,"原價NT$"+(0,a.zw)(t.origin_price),1)):(0,s.kq)("",!0)])])],8,n),(0,s._)("div",b,[(0,s._)("button",{type:"button",class:"cart-btn",onClick:i=>q.addCart(t.id),disabled:this.status.loadingItem===t.id}," 加入購物車 ",8,D)])])))),128))])):P.isLoading?((0,s.wg)(),(0,s.iD)("div",I,L)):((0,s.wg)(),(0,s.iD)("div",$,[x,F,(0,s.Wm)(N,{to:"/products",class:"btn surf-btn"},{default:(0,s.w5)((()=>[(0,s.Uk)("現在去逛逛")])),_:1})]))])],64)}e(7658);var q=e(8373),S={data(){return{favoriteItems:[],favoriteProducts:[],isLoading:!1,status:{loadingItem:""}}},inject:["$httpMessageState","emitter"],methods:{getFavoriteProducts(){const t="https://vue3-course-api.hexschool.io/api/eunho-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{if(this.isLoading=!1,t.data.success){const i=t.data.products;this.favoriteProducts=i.filter((t=>this.favoriteItems.some((i=>t.id===i))))}})).catch((t=>{console.log(t)}))},getProductDescription(t){this.$router.push(`/product/${t}`)},addCart(t){const i="https://vue3-course-api.hexschool.io/api/eunho-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(i,{data:e}).then((t=>{t.data.success&&(console.log(t),this.$httpMessageState(t,"加入購物車"),this.getCart(),this.status.loadingItem="")})).catch((t=>{console.log(t)}))},removeFavorite(t){this.favoriteItems.indexOf(t.id),this.favoriteItems.splice(this.favoriteItems.indexOf(t.id),1),this.emitter.emit("push-message",{style:"danger",title:"已移除收藏"}),localStorage.setItem("favoriteList",JSON.stringify(this.favoriteItems)),this.getFavorite(),this.getFavoriteProducts()},getCart(){const t="https://vue3-course-api.hexschool.io/api/eunho-api/cart";this.$http.get(t).then((t=>{this.cart=t.data.data,this.cartLength=t.data.data.carts.length,this.emitter.emit("sendNum",{data:this.cartLength})})).catch((t=>{console.log(t)}))}},mixins:[q.Z],created(){this.getFavorite(),this.getFavoriteProducts()}},N=e(89);const O=(0,N.Z)(S,[["render",P]]);var z=O}}]);
//# sourceMappingURL=553.b128fe4c.js.map