{"version":3,"file":"js/365.98d3c232.js","mappings":"6GAAA,KACEA,QAAS,CACPC,WAAAA,GACE,GAAIC,aAAaC,QAAQ,gBAAiB,CACxC,MAAMC,EAAaF,aAAaC,QAAQ,gBACxCE,KAAKC,cAAgBC,KAAKC,MAAMJ,EAClC,MACEC,KAAKC,cAAgB,EAEzB,G,+GCPGG,MAAM,iD,SACJA,MAAM,O,uBAIEA,MAAM,a,SACLA,MAAM,M,SACNA,MAAM,Q,GACZC,EAAAA,EAAAA,GAA4B,OAAvBD,MAAM,QAAO,QAAI,G,GAEnBA,MAAM,a,GACJA,MAAM,c,uBAGJA,MAAM,e,SACNA,MAAM,gC,GAGRA,MAAM,iB,SACHA,MAAM,e,mBAEPA,MAAM,uB,SAMhBA,MAAM,kB,GACTC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,8BAA8BE,KAAK,U,EAC5CD,EAAAA,EAAAA,GAA+C,QAAzCD,MAAM,mBAAkB,gBAAU,G,GAD1CG,G,SAIUH,MAAM,c,GAChBC,EAAAA,EAAAA,GAAuC,KAApCD,MAAM,2BAAyB,S,GAClCC,EAAAA,EAAAA,GAAkD,OAA7CD,MAAM,wBAAuB,cAAU,G,oHAnChDI,EAAAA,EAAAA,IAAuCC,EAAA,CAA7BC,OAAQC,EAAAC,WAAS,oBAC3BP,EAAAA,EAAAA,GAqCM,MArCNQ,EAqCM,CApCmBF,EAAAG,iBAAiBC,SAAM,WAA9CC,EAAAA,EAAAA,IAyBM,MAzBNC,EAyBM,gBAxBJD,EAAAA,EAAAA,IAuBME,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAvB8CR,EAAAG,kBAARM,K,WAA5CJ,EAAAA,EAAAA,IAuBM,OAvBDZ,MAAM,0BAA4DiB,IAAKD,EAAKE,I,EAC/EjB,EAAAA,EAAAA,GAqBM,OArBDD,MAAM,OAAQmB,QAAKC,GAAEC,EAAAC,sBAAsBN,EAAKE,K,EACnDjB,EAAAA,EAAAA,GAKM,OALDD,MAAM,eAAgBuB,OAAKC,EAAAA,EAAAA,IAAA,CAAAC,gBAAA,OAA4BT,EAAKU,e,CAClCV,EAAKW,OAASX,EAAKY,eAAY,WAA5DhB,EAAAA,EAAAA,IAAoE,MAApEiB,KAAoE,eAC7Cb,EAAKW,OAASX,EAAKY,eAAY,WAAtDhB,EAAAA,EAAAA,IAAiE,OAAjEkB,EAAwD,QAAE,eACjCd,EAAKW,OAASX,EAAKY,eAAY,WAAxDhB,EAAAA,EAAAA,IAAqE,OAArEmB,EAA0D,UAAI,eAC9DC,GAA4B,IAE9B/B,EAAAA,EAAAA,GAaM,MAbNgC,EAaM,EAZJhC,EAAAA,EAAAA,GAMM,MANNiC,EAMM,EALJjC,EAAAA,EAAAA,GAAyB,WAAAkC,EAAAA,EAAAA,IAAlBnB,EAAKoB,OAAK,IACjBnC,EAAAA,EAAAA,GAGI,KAHDoC,KAAK,IAAKlB,SAAKmB,EAAAA,EAAAA,KAAAlB,GAAeC,EAAAkB,eAAevB,IAAI,qB,CACrBT,EAAAV,cAAc2C,OAAOtB,GAAOF,EAAKE,KAAOA,MAAE,WAAvEN,EAAAA,EAAAA,IAA8E,IAA9E6B,MAA8E,WAC9E7B,EAAAA,EAAAA,IAAmD,IAAnD8B,KAAmD,QAGvDzC,EAAAA,EAAAA,GAIM,MAJN0C,EAIM,CAH4B3B,EAAKW,QAAK,WAA1Cf,EAAAA,EAAAA,IAAuE,OAAvEgC,EAA4C,QAAIT,EAAAA,EAAAA,IAAGnB,EAAKW,OAAK,oBAChDX,EAAKW,OAA+B,iBAA1B,WAAvBf,EAAAA,EAAAA,IAAwD,OAAAiC,GAAAV,EAAAA,EAAAA,IAA5BnB,EAAKY,cAAe,IAAC,IACVZ,EAAKW,OAASX,EAAKY,eAAY,WAAtEhB,EAAAA,EAAAA,IAA0G,MAA1GkC,EAAwE,SAAKX,EAAAA,EAAAA,IAAGnB,EAAKY,cAAY,mC,SAMpErB,EAAAC,YAAS,WAAhDI,EAAAA,EAAAA,IAIM,MAJNmC,EAIMC,MAAA,WACNpC,EAAAA,EAAAA,IAIM,MAJNqC,EAIM,CAHJC,EACAC,GACA/C,EAAAA,EAAAA,IAAoEgD,EAAA,CAAvDC,GAAG,YAAYrD,MAAM,gB,mBAAe,IAAK,UAAL,Y,sCAQvD,GACEsD,IAAAA,GACE,MAAO,CACLzD,cAAe,GACfa,iBAAkB,GAClBF,WAAW,EAEf,EACA+C,OAAQ,CAAC,WACThE,QAAS,CACPiE,mBAAAA,GACE,MAAMC,EAAO,kEACb7D,KAAKY,WAAY,EACjBZ,KAAK8D,MAAMC,IAAIF,GACZG,MAAKC,IAEJ,GADAjE,KAAKY,WAAY,EACbqD,EAAIP,KAAKQ,QAAS,CACpB,MAAMC,EAAcF,EAAIP,KAAKU,SAC7BpE,KAAKc,iBAAmBqD,EAAYE,QAAOjD,GAAQpB,KAAKC,cAAcqE,MAAMhD,GAAOF,EAAKE,KAAOA,KACjG,IAEN,EACAI,qBAAAA,CAAuBJ,GACrBtB,KAAKuE,QAAQC,KAAM,YAAWlD,IAChC,EACAqB,cAAAA,CAAgBvB,GACdpB,KAAKC,cAAcwE,QAAQrD,EAAKE,IAChCtB,KAAKC,cAAcyE,OAAO1E,KAAKC,cAAcwE,QAAQrD,EAAKE,IAAK,GAC/DtB,KAAK2E,QAAQC,KAAK,eAAgB,CAChCjD,MAAO,SACPa,MAAO,UAET3C,aAAagF,QAAQ,eAAgB3E,KAAK4E,UAAU9E,KAAKC,gBACzDD,KAAKJ,cACLI,KAAK4D,qBACP,GAEFmB,OAAQ,CAACC,EAAAA,GACTC,OAAAA,GACEjF,KAAKJ,cACLI,KAAK4D,qBACP,G,QCjFF,MAAMsB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vueworks/./src/mixins/favoriteMixin.js","webpack://vueworks/./src/views/Front/MyFavorite.vue","webpack://vueworks/./src/views/Front/MyFavorite.vue?964b"],"sourcesContent":["export default {\r\n  methods: {\r\n    getFavorite () {\r\n      if (localStorage.getItem('favoriteList')) {\r\n        const changeList = localStorage.getItem('favoriteList')\r\n        this.favoriteItems = JSON.parse(changeList)\r\n      } else {\r\n        this.favoriteItems = []\r\n      }\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <LoaDing :avtive=\"isLoading\"></LoaDing>\r\n  <div class=\"container favContainer goods pt-3 all-content\">\r\n    <div class=\"row\" v-if=\"favoriteProducts.length\">\r\n      <div class=\"col col-6 col-md-3 my-4\" v-for=\"item in favoriteProducts\" :key=\"item.id\">\r\n        <div class=\"card\" @click=\"getProductDescription(item.id)\">\r\n          <div class=\"card-img-top\" :style=\"{ backgroundImage: `url(${item.imageUrl})` }\">\r\n            <div class=\"sale-logo\" v-if=\"item.price != item.origin_price\"></div>\r\n            <span class=\"on\" v-if=\"item.price != item.origin_price\">ON</span>\r\n            <span class=\"sale\" v-if=\"item.price != item.origin_price\">SALE</span>\r\n            <div class=\"more\">查看更多</div>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"card-title\">\r\n              <h5>{{ item.title }}</h5>\r\n              <a href=\"#\" @click.stop.prevent=\"removeFavorite(item)\">\r\n                <i class=\"bi bi-heart\" v-if=\"favoriteItems.every((id) => item.id !== id)\"></i>\r\n                <i class=\"bi bi-heart-fill text-danger\" v-else></i>\r\n              </a>\r\n            </div>\r\n            <div class=\"product-price\">\r\n              <span class=\"text-danger\" v-if=\"item.price\">NT ${{ item.price }}</span>\r\n              <span v-if=\"!item.price\">{{ item.origin_price }}元</span>\r\n              <del class=\"del-price float-end\" v-if=\"item.price != item.origin_price\">原價NT${{ item.origin_price }}</del>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"container spin\" v-else-if=\"isLoading\">\r\n      <div class=\"spinner-border text-success\" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"noFavorite\">\r\n      <i class=\"bi bi-chat-square-heart\"></i>\r\n      <div class=\"nothing-content fs-3\">目前沒有收藏的產品喔</div>\r\n      <router-link to=\"/products\" class=\"btn surf-btn\">現在去逛逛</router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport favoriteMixin from '@/mixins/favoriteMixin'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      favoriteItems: [],\r\n      favoriteProducts: [],\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getFavoriteProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.isLoading = false\r\n          if (res.data.success) {\r\n            const allProducts = res.data.products\r\n            this.favoriteProducts = allProducts.filter(item => this.favoriteItems.some((id) => item.id === id))\r\n          }\r\n        })\r\n    },\r\n    getProductDescription (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    },\r\n    removeFavorite (item) {\r\n      this.favoriteItems.indexOf(item.id)\r\n      this.favoriteItems.splice(this.favoriteItems.indexOf(item.id), 1)\r\n      this.emitter.emit('push-message', {\r\n        style: 'danger',\r\n        title: '已移除收藏'\r\n      })\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteItems))\r\n      this.getFavorite()\r\n      this.getFavoriteProducts()\r\n    }\r\n  },\r\n  mixins: [favoriteMixin],\r\n  created () {\r\n    this.getFavorite()\r\n    this.getFavoriteProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./MyFavorite.vue?vue&type=template&id=4c62da3a\"\nimport script from \"./MyFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./MyFavorite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["methods","getFavorite","localStorage","getItem","changeList","this","favoriteItems","JSON","parse","class","_createElementVNode","role","_hoisted_18","_createVNode","_component_LoaDing","avtive","$data","isLoading","_hoisted_1","favoriteProducts","length","_createElementBlock","_hoisted_2","_Fragment","_renderList","item","key","id","onClick","$event","$options","getProductDescription","style","_normalizeStyle","backgroundImage","imageUrl","price","origin_price","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","title","href","_withModifiers","removeFavorite","every","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_component_router_link","to","data","inject","getFavoriteProducts","url","$http","get","then","res","success","allProducts","products","filter","some","$router","push","indexOf","splice","emitter","emit","setItem","stringify","mixins","favoriteMixin","created","__exports__","render"],"sourceRoot":""}