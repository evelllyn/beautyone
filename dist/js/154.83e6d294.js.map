{"version":3,"file":"js/154.83e6d294.js","mappings":"uMAEOA,MAAM,qB,GACJA,MAAM,Y,aAEPC,EAAAA,EAAAA,GAAa,UAAT,QAAI,G,GACDD,MAAM,sB,GACXC,EAAAA,EAAAA,GAQQ,eAPNA,EAAAA,EAAAA,GAMK,YALHA,EAAAA,EAAAA,GAAyB,MAArBD,MAAM,SAAQ,OAClBC,EAAAA,EAAAA,GAA2B,MAAvBD,MAAM,SAAQ,SAClBC,EAAAA,EAAAA,GAAyB,MAArBD,MAAM,SAAQ,OAClBC,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAS,a,GAUFD,MAAM,8B,mDAEJA,MAAM,oB,mBAMRA,MAAM,e,GAETA,MAAM,Y,4BAENC,EAAAA,EAAAA,GAA4B,KAAzBD,MAAM,gBAAc,S,GAAvBE,G,GAOJD,EAAAA,EAAAA,GAAwC,MAApCE,QAAQ,IAAIH,MAAM,YAAW,MAAE,G,GAC/BA,MAAM,Y,aAGVC,EAAAA,EAAAA,GAAqD,MAAjDE,QAAQ,IAAIH,MAAM,wBAAuB,OAAG,G,GAC5CA,MAAM,wB,GAIXA,MAAM,8C,GACTC,EAAAA,EAAAA,GAAyB,OAApBD,MAAM,SAAO,S,GAEbA,MAAM,sB,GAMRA,MAAM,mB,SAIRA,MAAM,kB,GACTC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,8BAA8BI,KAAK,U,EAC5CH,EAAAA,EAAAA,GAA+C,QAAzCD,MAAM,mBAAkB,gBAAU,G,GAD1CK,G,SAIUL,MAAM,W,GAChBC,EAAAA,EAAAA,GAA+B,KAA5BD,MAAM,mBAAiB,S,GAC1BC,EAAAA,EAAAA,GAAoD,OAA/CD,MAAM,wBAAuB,gBAAY,G,oHAtEpDM,EAAAA,EAAAA,IAAuCC,EAAA,CAA7BC,OAAQC,EAAAC,WAAS,oBAC3BT,EAAAA,EAAAA,GAyEM,MAzENU,EAyEM,EAxEJV,EAAAA,EAAAA,GAuEM,MAvENW,EAuEM,CAtEOH,EAAAI,KAAKC,MAAMC,SAAM,WAA5BC,EAAAA,EAAAA,IA2DM,MAAAC,EAAA,CA1DJC,GACAjB,EAAAA,EAAAA,GA4CQ,QA5CRkB,EA4CQ,CA3CNC,GASAnB,EAAAA,EAAAA,GAuBQ,6BAtBNe,EAAAA,EAAAA,IAqBKK,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IArBcb,EAAAI,KAAKC,OAAbS,K,WAAXP,EAAAA,EAAAA,IAqBK,MArB2BQ,IAAKD,EAAKE,I,EACxCxB,EAAAA,EAAAA,GAAwF,MAApFD,MAAM,WAAY0B,OAAKC,EAAAA,EAAAA,IAAA,CAAAC,gBAAA,OAA4BL,EAAKM,QAAQC,e,SACpE7B,EAAAA,EAAAA,GAEK,WAAA8B,EAAAA,EAAAA,IADAR,EAAKM,QAAQG,OAAK,IAEvB/B,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAGM,MAHNgC,EAGM,WAFJhC,EAAAA,EAAAA,GAAkJ,SAA3IiC,KAAK,SAASlC,MAAM,eAAemC,IAAI,IAAKC,SAAU3B,EAAA4B,OAAOC,cAAgBf,EAAKE,G,yBAAoBF,EAAKgB,IAAGC,EAAGC,SAAMD,GAAEE,EAAAC,WAAWpB,I,kBAA9BA,EAAKgB,SAAG,G,QAAxB,OAC7FtC,EAAAA,EAAAA,GAA2D,MAA3D2C,GAA2Db,EAAAA,EAAAA,IAA1BR,EAAKM,QAAQgB,MAAI,QAGtD5C,EAAAA,EAAAA,GAIK,WAHUQ,EAAAI,KAAKiC,cAAgBrC,EAAAI,KAAKkC,QAAK,WAA5C/B,EAAAA,EAAAA,IAAyD,QAAAgC,EAAX,SAAG,wBAAQ,OACvDjB,EAAAA,EAAAA,IAAGkB,EAAAC,SAASC,SAAS5B,EAAKuB,cAAe,IAC3C,GAA+BvB,EAAK6B,SAAM,WAA1CpC,EAAAA,EAAAA,IAAwD,MAAxDqC,EAA4C,YAAM,kBAEpDpD,EAAAA,EAAAA,GAIK,KAJLqD,EAIK,EAHHrD,EAAAA,EAAAA,GAES,UAFDiC,KAAK,SAASlC,MAAM,gCAAiCoC,SAAU3B,EAAA4B,OAAOC,cAAgBf,EAAKE,GAAK8B,QAAKf,GAAEE,EAAAc,eAAejC,EAAKE,K,uBAMzIxB,EAAAA,EAAAA,GASQ,eARNA,EAAAA,EAAAA,GAGK,WAFHwD,GACAxD,EAAAA,EAAAA,GAA8D,KAA9DyD,EAAqB,MAAE3B,EAAAA,EAAAA,IAAGkB,EAAAC,SAASC,SAAS1C,EAAAI,KAAKkC,QAAK,KAE9CtC,EAAAI,KAAKiC,cAAgBrC,EAAAI,KAAKkC,QAAK,WAAzC/B,EAAAA,EAAAA,IAGK,KAAA2C,EAAA,CAFHC,GACA3D,EAAAA,EAAAA,GAAiF,KAAjF4D,EAAiC,MAAE9B,EAAAA,EAAAA,IAAGkB,EAAAC,SAASC,SAAS1C,EAAAI,KAAKiC,cAAW,2BAI9E7C,EAAAA,EAAAA,GAQM,MARN6D,EAQM,CAPJC,GAAyB,SACzB9D,EAAAA,EAAAA,GAAmF,SAA5EiC,KAAK,OAAOlC,MAAM,e,qCAAwBS,EAAAuD,YAAWxB,GAAEyB,YAAY,U,iBAAzBxD,EAAAuD,gBACjD/D,EAAAA,EAAAA,GAIM,MAJNiE,EAIM,EAHJjE,EAAAA,EAAAA,GAES,UAFDiC,KAAK,SAASlC,MAAM,iBAAkBuD,QAAKY,EAAA,KAAAA,EAAA,OAAAC,IAAE1B,EAAA2B,eAAA3B,EAAA2B,iBAAAD,KAAe,gBAKxEnE,EAAAA,EAAAA,GAEM,MAFNqE,EAEM,EADJhE,EAAAA,EAAAA,IAA+DiE,EAAA,CAAlDC,GAAG,UAAUxE,MAAM,c,mBAAa,IAAI,UAAJ,W,WAGVS,EAAAC,YAAS,WAAhDM,EAAAA,EAAAA,IAIM,MAJNyD,EAIMC,MAAA,WACN1D,EAAAA,EAAAA,IAIM,MAJN2D,EAIM,CAHJC,EACAC,GACAvE,EAAAA,EAAAA,IAAoEiE,EAAA,CAAvDC,GAAG,YAAYxE,MAAM,gB,mBAAe,IAAK,UAAL,Y,8BAQzD,GACE8E,IAAAA,GACE,MAAO,CACLC,SAAU,GACVlD,QAAS,CAAC,EACVQ,OAAQ,CACNC,YAAa,IAEfzB,KAAM,CACJC,MAAO,IAETkD,YAAa,GACbtD,WAAW,EAEf,EACAsE,OAAQ,CAAC,qBACTC,QAAS,CACPC,WAAAA,GACE,MAAMC,EAAO,kEACbC,KAAK1E,WAAY,EACjB0E,KAAKC,MAAMC,IAAIH,GACZI,MAAKC,IACJJ,KAAK1E,WAAY,EACjB0E,KAAKL,SAAWS,EAAIV,KAAKC,QAAO,GAEtC,EACAU,UAAAA,CAAYhE,GACV2D,KAAKM,QAAQC,KAAM,YAAWlE,IAChC,EACAmE,OAAAA,CAASnE,GACP,MAAM0D,EAAO,0DACbC,KAAK/C,OAAOC,YAAcb,EAC1B,MAAMZ,EAAO,CACXgF,WAAYpE,EACZc,IAAK,GAEP6C,KAAKC,MAAMS,KAAKX,EAAK,CAAEL,KAAMjE,IAC1B0E,MAAKC,IACJJ,KAAK/C,OAAOC,YAAc,EAAC,GAEjC,EACAyD,OAAAA,GACE,MAAMZ,EAAO,0DACbC,KAAK1E,WAAY,EACjB0E,KAAKC,MAAMC,IAAIH,GACZI,MAAKC,IACJJ,KAAK1E,WAAY,EAEjB0E,KAAKvE,KAAO2E,EAAIV,KAAKA,IAAG,GAE9B,EACAnC,UAAAA,CAAYpB,GACV,MAAM4D,EAAO,2DAAiE5D,EAAKE,KACnF2D,KAAK1E,WAAY,EACjB0E,KAAK/C,OAAOC,YAAcf,EAAKE,GAC/B,MAAMZ,EAAO,CACXgF,WAAYtE,EAAKsE,WACjBtD,IAAKhB,EAAKgB,KAEZ6C,KAAKC,MAAMW,IAAIb,EAAK,CAAEL,KAAMjE,IACzB0E,MAAKC,IACJJ,KAAK1E,WAAY,EACjB0E,KAAK/C,OAAOC,YAAc,GAC1B8C,KAAKW,SAAS,GAEpB,EACA1B,aAAAA,GACE,MAAMc,EAAO,4DACP/B,EAAS,CACb6C,KAAMb,KAAKpB,aAEboB,KAAK1E,WAAY,EACjB0E,KAAKC,MAAMS,KAAKX,EAAK,CAAEL,KAAM1B,IAC1BmC,MAAKC,IACJJ,KAAK1E,WAAY,EACjB0E,KAAKc,kBAAkBV,EAAK,SAC5BJ,KAAKW,SAAS,GAEpB,EACAvC,cAAAA,CAAgB/B,GACd,MAAM0D,EAAO,2DAAiE1D,IAC9E2D,KAAKC,MAAMc,OAAOhB,GACfI,MAAKC,IACJJ,KAAKc,kBAAkBV,EAAK,QAC5BJ,KAAK/C,OAAOC,YAAc,GAC1B8C,KAAKW,SAAS,GAEpB,GAEFK,OAAAA,GACEhB,KAAKF,cACLE,KAAKW,SACP,G,QCvKF,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vueworks/./src/views/Front/UserCart.vue","webpack://vueworks/./src/views/Front/UserCart.vue?e966"],"sourcesContent":["<template>\r\n  <LoaDing :avtive=\"isLoading\"></LoaDing>\r\n  <div class=\"container fill-in\">\r\n    <div class=\"row cart\">\r\n      <div v-if=\"cart.carts.length\">\r\n        <h3>購物清單</h3>\r\n        <table class=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th class=\"col-1\">圖片</th>\r\n              <th class=\"col-5\">商品名稱</th>\r\n              <th class=\"col-2\">數量</th>\r\n              <th>單價</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n              <td class=\"list-pic\" :style=\"{ backgroundImage: `url(${item.product.imageUrl})` }\"></td>\r\n              <td>\r\n                {{ item.product.title }}\r\n              </td>\r\n              <td>\r\n                <div class=\"input-group input-group-sm\">\r\n                  <input type=\"number\" class=\"form-control\" min=\"1\" :disabled=\"status.loadingItem === item.id\" v-model.number=\"item.qty\" @change=\"updateCart(item)\">\r\n                  <div class=\"input-group-text\">{{ item.product.unit }}</div>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <small v-if=\"cart.final_total !== cart.total\">折扣價</small>\r\n                $ {{ $filters.currency(item.final_total) }}\r\n                <div class=\"text-danger\" v-if=\"item.coupon\">已套用優惠券</div>\r\n              </td>\r\n              <td class=\"text-end\">\r\n                <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" :disabled=\"status.loadingItem === item.id\" @click=\"removeCartItem(item.id)\">\r\n                  <i class=\"bi bi-trash3\"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colspan=\"4\" class=\"text-end\">總計</td>\r\n              <td class=\"text-end\">$ {{ $filters.currency(cart.total)}}</td>\r\n            </tr>\r\n            <tr v-if=\"cart.final_total !== cart.total\">\r\n              <td colspan=\"4\" class=\"text-end text-danger\">折扣價</td>\r\n              <td class=\"text-end text-danger\">$ {{ $filters.currency(cart.final_total) }}</td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <div class=\"use-coupon input-group input-group-sm mb-3\">\r\n          <div class=\"col-7\"></div>\r\n          <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\r\n          <div class=\"input-group-append\">\r\n            <button type=\"button\" class=\"btn coupon-btn\" @click=\"addCouponCode\">\r\n              使用優惠券\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"go-pay text-end\">\r\n          <router-link to=\"/fillin\" class=\"btn go-btn\">前往結帳</router-link>\r\n        </div>\r\n      </div>\r\n      <div class=\"container spin\" v-else-if=\"isLoading\">\r\n        <div class=\"spinner-border text-success\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"nothing\">\r\n        <i class=\"bi bi-cart-dash\"></i>\r\n        <div class=\"nothing-content fs-3\">哎呀，購物車目前是空的喔</div>\r\n        <router-link to=\"/products\" class=\"btn surf-btn\">現在去逛逛</router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      cart: {\r\n        carts: []\r\n      },\r\n      coupon_code: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['$httpMessageState'],\r\n  methods: {\r\n    getProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.isLoading = false\r\n          this.products = res.data.products\r\n        })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    },\r\n    addCart (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart })\r\n        .then(res => {\r\n          this.status.loadingItem = ''\r\n        })\r\n    },\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.isLoading = false\r\n          // data中的data下面有carts,total,final_total\r\n          this.cart = res.data.data\r\n        })\r\n    },\r\n    updateCart (item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      this.isLoading = true\r\n      this.status.loadingItem = item.id\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(url, { data: cart })\r\n        .then(res => {\r\n          this.isLoading = false\r\n          this.status.loadingItem = ''\r\n          this.getCart()\r\n        })\r\n    },\r\n    addCouponCode () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\r\n      const coupon = {\r\n        code: this.coupon_code\r\n      }\r\n      this.isLoading = true\r\n      this.$http.post(url, { data: coupon })\r\n        .then(res => {\r\n          this.isLoading = false\r\n          this.$httpMessageState(res, '套用優惠券')\r\n          this.getCart()\r\n        })\r\n    },\r\n    removeCartItem (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.$http.delete(url)\r\n        .then(res => {\r\n          this.$httpMessageState(res, '移除商品')\r\n          this.status.loadingItem = ''\r\n          this.getCart()\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=f89ca164\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_14","colspan","role","_hoisted_26","_createVNode","_component_LoaDing","avtive","$data","isLoading","_hoisted_1","_hoisted_2","cart","carts","length","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","item","key","id","style","_normalizeStyle","backgroundImage","product","imageUrl","_toDisplayString","title","_hoisted_7","type","min","disabled","status","loadingItem","qty","$event","onChange","$options","updateCart","_hoisted_9","unit","final_total","total","_hoisted_10","_ctx","$filters","currency","coupon","_hoisted_11","_hoisted_12","onClick","removeCartItem","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","coupon_code","placeholder","_hoisted_23","_cache","args","addCouponCode","_hoisted_24","_component_router_link","to","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","data","products","inject","methods","getProducts","url","this","$http","get","then","res","getProduct","$router","push","addCart","product_id","post","getCart","put","code","$httpMessageState","delete","created","__exports__","render"],"sourceRoot":""}